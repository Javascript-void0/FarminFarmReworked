options:
	shaft: &8[&x&d&5&5&6&5&6&lRESHAFT&8]&f
	permission: &7Insufficient Permissions
	staff: &8[&x&d&5&5&6&5&6&lSTAFF&8]&f
	world: world

command /staffchat [<text>]:
	aliases: /sc
	permission: staff
	permission message: {@staff} {@permission}
	trigger:
		if arg-1 is not set:
			if {staffchat::%player%} is not set:
				set {staffchat::%player%} to true
				send "{@staff} &7Toggle &x&d&5&5&6&5&6&lENABLED"
			else:
				delete {staffchat::%player%}
				send "{@staff} &7Toggle &x&d&5&5&6&5&6&lDISABLED"
		else:
			loop all players:
				if loop-player has permission "sc.staffchat":
					send formatted "{@staff} %player's prefix%&r%player's display name%&7: &r%arg 1%" to loop-player
on chat:
	if {staffchat::%player%} is set:
		cancel event
		loop all players:
			if loop-player has permission "sc.staffchat":
				send formatted "{@staff} %player's prefix%&r%player's display name%&7: &r%message%" to loop-player
every 1 second:
	loop all players:
		if {staffchat::%loop-player%} is true:
			send action bar "{@staff} &x&d&5&5&6&5&6Enabled" to loop-player
on chat:
	if player is op:
		stop
	else:
		if {SkCheat::spam.m::%uuid of player%} is message:
			add 1 to {SkCheat::spam.p::%uuid of player%}
			if {SkCheat.spam.notify::%uuid of player%} is not set:
				set {SkCheat.spam.notify::%uuid of player%} to now
			if difference between {SkCheat.spam.notify::%uuid of player%} and now is more than 1 second:
				if {SkCheat::spam.p::%uuid of player%} is greater than 6:
					kick the player due to "{@shaft} You were spamming."
					clear {SkCheat::spam.p::%uuid of player%}
		else:
			set {SkCheat::spam.m::%uuid of player%} to message	
on join:
	clear {SkCheat::spam.p::%uuid of player%}
	clear {SkCheat::spam.m::%uuid of player%}
on disconnect:
	clear {SkCheat::spam.p::%uuid of player%}
	clear {SkCheat::spam.m::%uuid of player%}
command /mutechat:
	permission: staff
	permission message: {@staff} {@permission}
	trigger:
		if {Globalchat} is not set:
			set {Globalchat} to true
			broadcast "{@shaft} &7Chat &x&d&5&5&6&5&6&lMUTED &7by %player%"
			stop trigger
		if {Globalchat} is set:
			clear {Globalchat}
			broadcast "{@shaft} &7Chat &x&d&5&5&6&5&6&lUNMUTED &7by %player%"
on chat:
	if {Globalchat} is true:
		if player has permission "chat.mute.bypass":
			stop trigger
		else:
			cancel event
			send "{@shaft} &7Chat is currently &x&d&5&5&6&5&6muted."
command /clearchat:
	permission: staff
	permission message: {@staff} {@permission}
	aliases: /cc
	trigger:
		loop 100 times:
			broadcast ""
		send "{@shaft} &7You have &x&d&5&5&6&5&6cleared &7the chat"
command /clearlag:
	permission: staff
	permission message: {@staff} {@permission}
	trigger:
		set {_n} to size of all entities
		delete all entities
		loop {m_maxhealth::*}:
			if {m_maxhealth::%loop-value%} is not a player:
				delete {m_maxhealth::%loop-value%}
		loop {m_health::*}:
			if {m_health::%loop-value%} is not a player:
				delete {m_health::%loop-value%}
		loop {m_damage::*}:
			if {m_damage::%loop-value%} is not a player:
				delete {m_damage::%loop-value%}
		broadcast "{@shaft} &7Cleared &x&d&5&5&6&5&6%{_n}% &7entities"